md-content(md-padding)
    md-card
        md-data-table-container
            table.md-primary(md-data-table md-progress="deferred")
                thead
                    tr
                        th(name='Services')
                        th(name='Status')
                tbody
                    tr(
                        md-auto-select
                        ng-repeat='entry in serviceStatus | ' +
                            'offsetBy: pageSize * currentPage | ' +
                            'limitTo: pageSize'
                        )
                        td
                            a(ng-href='/server/{{ server.hostname }}/services/{{ entry.service }}/')
                                | {{ entry.service }}
                        td
                            md-icon.material-icons(ng-if='entry.isRunning') check_circle
                            md-icon.material-icons(ng-if='!entry.isRunning') highlight_off
                        td
                            span(flex)
                        td
                            md-button.md-icon-button(
                                ng-class='{ disabled: entry.isRunning }'
                                ng-click='startService(entry.service)'
                                title='Start service'
                            ): md-icon.material-icons play_arrow
                            md-button.md-icon-button(
                                ng-class='{ disabled: !entry.isRunning }'
                                ng-click='stopService(entry.service)'
                                title='Stop service'
                            ): md-icon.material-icons stop
                            md-button.md-icon-button(
                                ng-class='{ disabled: !entry.isRunning }'
                                ng-click='restartService(entry.service)'
                                title='Restart service'
                            ): md-icon.material-icons replay
        md-data-table-pagination(
            md-limit="query.limit"
            md-page="query.page"
            md-total="{{desserts.count}}"
            md-trigger="onpagechange"
        )
        //md-card-content
            .panel.panel-default
                .panel-heading Running services
                .panel-body
                    form.form-inline: .form-group
                        button.btn(type='button' ng-click='currentPage = currentPage*1 - 1'
                            ng-disabled="currentPage*1 <= 0 ? 'disabled' : ''") Previous
                        
                        button.btn(type='button' ng-click='currentPage = currentPage*1 + 1'
                            ng-disabled="currentPage*1 >= (pkgs.length / pageSize) - 1 ? 'disabled' : ''") Next
                    
                        input.form-control(ng-model='currentPage')
                        
                    table.table.table-hover
                        thead
                            td: h5 Service
                            td: h5 Status
                            td: h5 Controls
                        tbody
                            tr(ng-repeat='entry in serviceStatus | ' +
                                    'offsetBy: pageSize * currentPage | ' +
                                    'limitTo: pageSize')
                                td: a(href='/server/{{ server.hostname }}/service/{{ entry.service }}/') {{ entry.service }}
                                td
                                    .fa.fa-check.text-success(ng-if='entry.isRunning')
                                    .fa.fa-minus.text-danger(ng-if='!entry.isRunning')
                                td.col-sm-4.col-md-3
                                    .btn-group
                                        button.btn.btn-primary.btn-sm(
                                            ng-class='{ disabled: entry.isRunning }'
                                            ng-click='startService(entry.service)'
                                            title='Start service'
                                        ): .fa.fa-play
                                        button.btn.btn-primary.btn-sm(
                                            ng-class='{ disabled: !entry.isRunning }'
                                            ng-click='stopService(entry.service)'
                                            title='Stop service'
                                        ): .fa.fa-stop
                                        button.btn.btn-primary.btn-sm(
                                            ng-class='{ disabled: !entry.isRunning }'
                                            ng-click='restartService(entry.service)'
                                            title='Restart service'
                                        ): .fa.fa-refresh
