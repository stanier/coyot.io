md-content(md-padding)
    md-button.md-fab(ng-click='back()')
        md-icon.material-icons arrow_back
    md-card
        md-data-table-container
            table.md-primary(md-data-table md-progress="deferred")
                thead
                    tr
                        th(name='Privileged')
                        th(name='Handle')
                        th(name='Name')
                        th(name='Description')
                tbody
                    tr(
                        md-auto-select
                        ng-repeat='permission in permissions | ' +
                            'offsetBy: pageSize * currentPage | ' +
                            'limitTo: pageSize'
                        )
                        td
                            md-switch(
                                ng-checked='group.permissions.indexOf(permission.full_handle) > -1'
                                ng-click='change(permission.full_handle)'
                            )
                        td {{ permission.full_handle }}
                        td {{ permission.name }}
                        td {{ permission.description }}
        //md-card-content
            .row
                button.btn.btn-primary(ng-click='back()'): span.fa.fa-arrow-left
            .row
                .panel.panel-default
                    .panel-heading Edit group permissions
                    .panel-body
                        h3 Permissions for "{{ group.name }}"
                        hr
                        div(ng-repeat='category in categories')
                            h4 {{ category.name }}
                            table.table.table-striped.table-hover
                                thead
                                    td Privileged
                                    td Name
                                    td Description
                                tbody
                                    tr(ng-repeat='permission in category.permissions')
                                        td: .togglebutton: label
                                            input(
                                                type='checkbox'
                                                ng-checked='group.permissions.indexOf(permission.full_handle) > -1'
                                                ng-click='change(permission.full_handle)'
                                            )
                                            span.toggle
                                        td {{ permission.name }}
                                        td {{ permission.description }}
